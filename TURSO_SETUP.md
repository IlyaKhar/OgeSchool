# Настройка Turso для OGE Platform

## Что такое Turso?

Turso - это serverless SQLite, который работает на Vercel и других serverless платформах. Он полностью совместим с SQLite, но работает через HTTP API.

## Шаг 1: Регистрация на Turso

1. Зайдите на [turso.tech](https://turso.tech)
2. Зарегистрируйтесь (можно через GitHub)
3. Создайте аккаунт (бесплатный план доступен)

## Шаг 2: Создание базы данных

1. В панели Turso нажмите **"Create Database"**
2. Выберите регион (ближайший к вам)
3. Назовите базу: `oge-platform` или `ege-platform`
4. Нажмите **"Create"**

## Шаг 3: Получение credentials

1. После создания БД нажмите на неё
2. Перейдите в раздел **"Connect"** или **"Settings"**
3. Скопируйте:
   - **Database URL** (выглядит как `libsql://...`)
   - **Auth Token** (нажмите "Show" чтобы увидеть)

## Шаг 4: Добавление в Vercel

1. В панели Vercel откройте ваш проект
2. Перейдите в **Settings** → **Environment Variables**
3. Добавьте две переменные:

   **Key**: `TURSO_DATABASE_URL`  
   **Value**: `libsql://ваш-url-от-turso`

   **Key**: `TURSO_AUTH_TOKEN`  
   **Value**: `ваш-токен-от-turso`

4. Сохраните и передеплойте проект

## Шаг 5: Инициализация таблиц

После первого деплоя таблицы создадутся автоматически из `database/schema.sql`.

Если нужно создать вручную:
1. Подключитесь к Turso через CLI или веб-интерфейс
2. Выполните SQL из `database/schema.sql`

## Проверка работы

После деплоя проверьте логи Vercel - должно быть сообщение:
```
Turso (serverless SQLite) подключен
Таблицы созданы в Turso
```

## Бесплатный план Turso

- 500 MB хранилища
- 1 миллиард строк в месяц
- Достаточно для начала работы

## Troubleshooting

### Ошибка: "SQLite недоступен"
- Проверьте, что `TURSO_DATABASE_URL` и `TURSO_AUTH_TOKEN` добавлены в Vercel
- Убедитесь, что значения скопированы полностью (без пробелов)

### Ошибка: "Table already exists"
- Это нормально при повторных деплоях
- Таблицы уже созданы, можно игнорировать

### Ошибка подключения
- Проверьте, что токен актуален (токены могут истекать)
- Создайте новый токен в Turso и обновите в Vercel

